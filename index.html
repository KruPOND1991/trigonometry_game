<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game</title>
    <style>
        body {
            text-align: center;
            background-color: #f4f4f4;
            font-family: Arial, sans-serif;
        }
        img {
            width: 50%; /* ขนาดของรูปภาพครึ่งหน้าจอ */
        }
        input {
            margin-top: 20px;
        }
        button {
            margin-top: 20px;
        }
    </style>
</head>
<body>

    <!-- หน้าแรกของเกม -->
    <img id="gameImage" src="Front_Cover.jpg" alt="Game Cover" onclick="startGame()">
    
    <div id="inputContainer" style="display: none;">
        <input type="number" id="userInput" min="0" max="120">
        <button onclick="checkAnswer()">Enter</button>
    </div>

    <div id="nextButton" style="display: none;">
        <button onclick="nextLevel()">Next</button>
    </div>

    <div id="restartButton" style="display: none;">
        <button onclick="restartGame()">Re-start</button>
    </div>

    <script>
        let level = 1;
        let userAnswers = [];

        function startGame() {
            document.getElementById('gameImage').style.display = 'none';
            let imgElement = document.getElementById('gameImage');
            let images = ["Front_01.jpg", "Front_02.jpg"];
            let switchImages = setInterval(function() {
                imgElement.src = images[Math.floor(Math.random() * images.length)];
            }, 500);

            setTimeout(() => {
                clearInterval(switchImages);
                imgElement.style.display = 'none';
                showLevel(1);
            }, 2000);
        }

        function showLevel(levelNumber) {
            level = levelNumber;
            let imgElement = document.getElementById('gameImage');
            let inputContainer = document.getElementById('inputContainer');
            let nextButton = document.getElementById('nextButton');

            if (level === 1) {
                imgElement.src = "Level01.jpg";
                imgElement.style.display = 'block';
                inputContainer.style.display = 'block';
            } else if (level === 2) {
                imgElement.src = "Level02.jpg";
                imgElement.style.display = 'block';
                inputContainer.style.display = 'block';
            } else if (level === 3) {
                imgElement.src = "Level03.jpg";
                imgElement.style.display = 'block';
                inputContainer.style.display = 'block';
            }
        }

        function checkAnswer() {
            let inputValue = parseInt(document.getElementById('userInput').value);
            userAnswers.push(inputValue);

            if (level === 1) {
                if (inputValue === 0 || inputValue === 120) {
                    loseGame();
                    return;
                } else if (inputValue > 0 && inputValue < 120) {
                    showPassImages("Level01_pass_01.jpg", "Level01_pass_02.jpg");
                    document.getElementById('inputContainer').style.display = 'none';
                    document.getElementById('nextButton').style.display = 'block';
                }
            } else if (level === 2) {
                let sum = userAnswers.reduce((a, b) => a + b, 0);
                if (sum === 120 || sum === 180) {
                    loseGame();
                    return;
                } else {
                    showPassImages("Level02_no_pass_01.jpg", "Level02_no_pass_02.jpg");
                    document.getElementById('inputContainer').style.display = 'none';
                    document.getElementById('nextButton').style.display = 'block';
                }
            } else if (level === 3) {
                let sum = userAnswers.reduce((a, b) => a + b, 0);
                if (sum === 184 || sum === 189) {
                    loseGame();
                    return;
                } else {
                    showPassImages("Level03_pass_01.jpg", "Level03_pass_02.jpg");
                    setTimeout(() => {
                        showPassImages("Pass01.jpg", "Pass02.jpg");
                        document.getElementById('restartButton').style.display = 'block';
                    }, 2000);
                }
            }
        }

        function showPassImages(img1, img2) {
            let imgElement = document.getElementById('gameImage');
            let images = [img1, img2];
            let switchImages = setInterval(function() {
                imgElement.src = images[Math.floor(Math.random() * images.length)];
            }, 500);
            setTimeout(() => {
                clearInterval(switchImages);
            }, 2000);
        }

        function nextLevel() {
            level++;
            userAnswers = [];
            showLevel(level);
            document.getElementById('nextButton').style.display = 'none';
        }

        function loseGame() {
            let imgElement = document.getElementById('gameImage');
            imgElement.src = "Lose01.jpg";
            imgElement.style.display = 'block';
            setTimeout(() => {
                imgElement.src = "Lose_02.jpg";
                setTimeout(() => {
                    imgElement.src = "Lose_03.jpg";
                    setTimeout(() => {
                        document.getElementById('restartButton').style.display = 'block';
                    }, 1000);
                }, 1000);
            }, 1000);
        }

        function restartGame() {
            location.reload();
        }
    </script>

</body>
</html>